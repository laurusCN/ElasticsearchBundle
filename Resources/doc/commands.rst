Console commands
================

All commands can be accessed using *Symfony* command line interface.

To use it simply type
``app/console <command_name> <arguments/options>`` in root folder of your project.

Overview
--------

- `Create index <commands.html#id1>`_
- `Drop index <commands.html#id2>`_
- `Import index <commands.html#id3>`_
- `Export index <commands.html#id4>`_
- `Type create <commands.html#id5>`_
- `Type update <commands.html#id6>`_
- `Type drop <commands.html#id7>`_
- `Cache clear <commands.html#id8>`_
- `Warmer put <commands.html#id9>`_
- `Warmer delete <commands.html#id10>`_

Create index
------------

-  Command name: ``ongr:es:index:create``.
-  Description: Creates a new index in Elasticsearch for the specified *manager* (see: :ref:`esb-manager`).
-  Options:

   +----------------------+---------------+------------------+----------------------------------------------------------------------------------------------------------+
   | Full name            | Short name    | Value            | What it does                                                                                             |
   +======================+===============+==================+==========================================================================================================+
   | ``--manager``        | *undefined*   | Manager name.    | Used to select *manager* to create index for. If not specified, default manager is used.                 |
   +----------------------+---------------+------------------+----------------------------------------------------------------------------------------------------------+
   | ``--time``           | ``-t``        | *not required*   | Creates an index with current timestamp appended to its name.                                            |
   +----------------------+---------------+------------------+----------------------------------------------------------------------------------------------------------+
   | ``--with-warmers``   | ``-w``        | *not required*   | Creates an index with warmers included.                                                                  |
   +----------------------+---------------+------------------+----------------------------------------------------------------------------------------------------------+

-  Examples:

   +------------------------------------------------+--------------------------------------------------------------------------------------+
   | Input                                          | What it does                                                                         |
   +================================================+======================================================================================+
   | ``ongr:es:index:create``                       | Creates an index in Elasticsearch for the default *manager*.                         |
   +------------------------------------------------+--------------------------------------------------------------------------------------+
   | ``ongr:es:index:create --manager shop --time`` | Creates an index for manager ``shop`` with current timestamp appended to its name.   |
   +------------------------------------------------+--------------------------------------------------------------------------------------+

Drop index
----------

-  Command name: ``ongr:es:index:drop``.
-  Description: Drops the index for the specified
   *manager*.
-  Options:

   +-----------------+---------------+------------------+----------------------------------------------------------------------------------------------------------+
   | Full name       | Short name    | Value            | What it does                                                                                             |
   +=================+===============+==================+==========================================================================================================+
   | ``--manager``   | *undefined*   | Manager name.    | Used to select *manager* to drop index for. If not specified, default manager is used.                   |
   +-----------------+---------------+------------------+----------------------------------------------------------------------------------------------------------+
   | ``--force``     | *undefined*   | *not required*   | This flag is required for the command to work.                                                           |
   +-----------------+---------------+------------------+----------------------------------------------------------------------------------------------------------+

-  Examples:

   +-------------------------------------------------+--------------------------------------------------------------------------------------------------+
   | Input                                           | What it does                                                                                     |
   +=================================================+==================================================================================================+
   | ``ongr:es:index:drop --force``                  | Drops an index in Elasticsearch of the default *manager*.                                        |
   +-------------------------------------------------+--------------------------------------------------------------------------------------------------+
   | ``ongr:es:index:drop --manager shop --force``   | Drop an index of *manager* ``shop``.                                                             |
   +-------------------------------------------------+--------------------------------------------------------------------------------------------------+
   
Import index
------------

.. important:: Currently this command only works with ``--raw`` flag.

-  Command name: ``ongr:es:index:import``.
-  Description: Imports data to your index.
-  Arguments:

   +--------------+----------------------------------------------------------------------------------+
   | Value        | What it specifies                                                                |
   +==============+==================================================================================+
   | File name.   | File name to import data from. File is looked for in your current working dir.   |
   +--------------+----------------------------------------------------------------------------------+

-  Options:

   +-----------------+---------------+------------------+----------------------------------------------------------------------------------------------------------+
   | Full name       | Short name    | Value            | What it does                                                                                             |
   +=================+===============+==================+==========================================================================================================+
   | ``--manager``   | *undefined*   | Manager name.    | Used to select *manager* to import data into. If not specified, default manager is used.                 |
   +-----------------+---------------+------------------+----------------------------------------------------------------------------------------------------------+
   | ``--raw``       | *undefined*   | *not required*   | This flag is used to specify whether data to import is in raw format or not.                             |
   +-----------------+---------------+------------------+----------------------------------------------------------------------------------------------------------+

-  Examples:

   +-----------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------+
   | Input                                                     | What it does                                                                                                          |
   +===========================================================+=======================================================================================================================+
   | ``ongr:es:index:import test.json --raw``                  | Imports data to the default *manager* index from the ``test.json`` file in current working directory.                 |
   +-----------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------+
   | ``ongr:es:index:import test.json --manager shop --raw``   | Imports data to ``shop`` *manager* index.                                                                             |
   +-----------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------+
    
Export index
------------

-  Command name: ``ongr:es:index:export``.
-  Description: Exports data from Elasticsearch index in a json format.
-  Arguments:

   +--------------+-----------------------------------------------------------------------------------------------------+
   | Value        | What it specifies                                                                                   |
   +==============+=====================================================================================================+
   | File name.   | File name to export data to. All files are exported to your current working directory by default.   |
   +--------------+-----------------------------------------------------------------------------------------------------+

-  Options:

   +-----------------+---------------+-----------------+----------------------------------------------------------------------+
   | Full name       | Short name    | Value           | What it does                                                         |
   +=================+===============+=================+======================================================================+
   | ``--manager``   | *undefined*   | Manager name.   | Used to select *manager* to dump data from.                          |
   |                 |               |                 | If not specified, default manager is used.                           |
   +-----------------+---------------+-----------------+----------------------------------------------------------------------+
   | ``--chunk``     | *undefined*   | Chunk size.     | Specifies the size of each chunk to be received from Elasticsearch.  |
   |                 |               |                 | This can be changed for performance reasons. Default value: ``500``. |
   +-----------------+---------------+-----------------+----------------------------------------------------------------------+

-  Examples:

   +----------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------+
   | Input                                                          | What it does                                                                                                          |
   +================================================================+=======================================================================================================================+
   | ``ongr:es:index:export test.json``                             | Exports data from the default *manager* index to the ``test.json`` file in current working directory.                 |
   +----------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------+
   | ``ongr:es:index:export test.json --manager shop --chunk 10``   | Exports data from ``shop`` *manager* index with a chunk size of ``10``.                                               |
   +----------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------+

Type create
-----------

- Command name: ``es:type:create``.
- Description: Puts mappings into elasticsearch client for specific *manager*.
- Options:

   +-----------------+---------------+------------------+-----------------------------------------------------------------------------------------------+
   | Full name       | Short name    | Value            | What it does                                                                                  |
   +=================+===============+==================+===============================================================================================+
   | ``--manager``   | *undefined*   | Manager name.    | Used to select *manager* to create types for. If not specified, default manager is used.      |
   +-----------------+---------------+------------------+-----------------------------------------------------------------------------------------------+
   | ``--type``      | ``-t``        | Type name.       | Used to select a specific types to create in your *manager* mapping.                          |
   +-----------------+---------------+------------------+-----------------------------------------------------------------------------------------------+


Type update
-----------

- Command name: ``ongr:es:type:update``.
- Description: Updates mapping of the specified *manager*.
- Options:

   +-----------------+---------------+------------------+-----------------------------------------------------------------------------------------------+
   | Full name       | Short name    | Value            | What it does                                                                                  |
   +=================+===============+==================+===============================================================================================+
   | ``--force``     | *undefined*   | *not required*   | This flag is required for the command to work.                                                |
   +-----------------+---------------+------------------+-----------------------------------------------------------------------------------------------+
   | ``--manager``   | *undefined*   | Manager name.    | Used to select *manager* to update types for. If not specified, default manager is used.      |
   +-----------------+---------------+------------------+-----------------------------------------------------------------------------------------------+
   | ``--type``      | *undefined*   | Type name.       | Used to select a specific type to update in your *manager* mapping.                           |
   +-----------------+---------------+------------------+-----------------------------------------------------------------------------------------------+

-  Examples:

   +-----------------------------------------------------------------+---------------------------------------------------------------+
   | Input                                                           | What it does                                                  |
   +=================================================================+===============================================================+
   | ``ongr:es:type:update --force``                                 | Updates mapping for the default *manager*.                    |
   +-----------------------------------------------------------------+---------------------------------------------------------------+
   | ``ongr:es:type:update --manager shop --type article --force``   | Updates mapping for ``shop`` *manager* type ``article``.      |
   +-----------------------------------------------------------------+---------------------------------------------------------------+

Type drop
---------

- Command name: ``es:type:drop``.
- Description: Drop elasticsearch index mappings.
- options:

   +-----------------+---------------+------------------+-----------------------------------------------------------------------------------------------+
   | Full name       | Short name    | Value            | What it does                                                                                  |
   +=================+===============+==================+===============================================================================================+
   | ``--force``     | ``-f``        | *not required*   | This flag is required for the command to work.                                                |
   +-----------------+---------------+------------------+-----------------------------------------------------------------------------------------------+
   | ``--manager``   | *undefined*   | Manager name.    | Used to select *manager* to drop types for. If not specified, default manager is used.        |
   +-----------------+---------------+------------------+-----------------------------------------------------------------------------------------------+
   | ``--type``      | ``-t``        | Type name.       | Used to select a specific types to drop in your *manager* mapping.                            |
   +-----------------+---------------+------------------+-----------------------------------------------------------------------------------------------+


Cache clear
-----------

- Command name: ``ongr:es:cache:clear``.
- Description: Clears elasticsearch client cache.
- Options:

   +-----------------+---------------+------------------+-----------------------------------------------------------------------------------------------+
   | Full name       | Short name    | Value            | What it does                                                                                  |
   +=================+===============+==================+===============================================================================================+
   | ``--manager``   | *undefined*   | Manager name.    | Used to select *manager* to clear cache for. If not specified, default manager is used.       |
   +-----------------+---------------+------------------+-----------------------------------------------------------------------------------------------+

-  Examples:

   +------------------------------------------------------------+---------------------------------------------------------------+
   | Input                                                      | What it does                                                  |
   +============================================================+===============================================================+
   | ``ongr:es:cache:clear``                                    | Clears client which *manager* is using cache.                 |
   +------------------------------------------------------------+---------------------------------------------------------------+
   | ``ongr:es:type:update --manager shop``                     | Clears client which ``shop`` *manager* is using cache.        |
   +------------------------------------------------------------+---------------------------------------------------------------+

Warmer put
----------

- Command name: ``ongr:es:warmer:put``.
- Description: Puts warmers into elasticsearch.
- Arguments:

   +--------------+-----------------------------------------------------------------------------------------------------+
   | Value        | What it specifies                                                                                   |
   +==============+=====================================================================================================+
   | Warmer name  | Array of tagged warmer names.                                                                       |
   +--------------+-----------------------------------------------------------------------------------------------------+

- Options:

   +-----------------+---------------+------------------+-----------------------------------------------------------------------------------------------+
   | Full name       | Short name    | Value            | What it does                                                                                  |
   +=================+===============+==================+===============================================================================================+
   | ``--manager``   | *undefined*   | Manager name.    | Used to select *manager* to put warmers for. If not specified, default manager is used.       |
   +-----------------+---------------+------------------+-----------------------------------------------------------------------------------------------+

-  Examples:

   +------------------------------------------------------------+------------------------------------------------------------------------------------+
   | Input                                                      | What it does                                                                       |
   +============================================================+====================================================================================+
   | ``ongr:es:warmer:put``                                     | Puts all warmers into client which *default* manager is using.                     |
   +------------------------------------------------------------+------------------------------------------------------------------------------------+
   | ``ongr:es:warmer:put --manager shop``                      | Puts all warmers into client which ``shop`` manager is using.                      |
   +------------------------------------------------------------+------------------------------------------------------------------------------------+
   | ``ongr:es:warmer:put foo baz --manager tuna``              | Puts ``foo`` and ``baz`` named warmers into client which ``tuna`` manager is using |
   +------------------------------------------------------------+------------------------------------------------------------------------------------+

Warmer delete
-------------

- Command name: ``ongr:es:warmer:delete``.
- Description: Removes warmers from elasticsearch.
- Arguments:

   +--------------+-----------------------------------------------------------------------------------------------------+
   | Value        | What it specifies                                                                                   |
   +==============+=====================================================================================================+
   | Warmer name  | Array of tagged warmer names.                                                                       |
   +--------------+-----------------------------------------------------------------------------------------------------+

- Options:

   +-----------------+---------------+------------------+-----------------------------------------------------------------------------------------------+
   | Full name       | Short name    | Value            | What it does                                                                                  |
   +=================+===============+==================+===============================================================================================+
   | ``--manager``   | *undefined*   | Manager name.    | Used to select *manager* to delete warmers for. If not specified, default manager is used.    |
   +-----------------+---------------+------------------+-----------------------------------------------------------------------------------------------+

-  Examples:

   +------------------------------------------------------------+----------------------------------------------------------------------------------------+
   | Input                                                      | What it does                                                                           |
   +============================================================+========================================================================================+
   | ``ongr:es:warmer:delete``                                  | Deletes all warmers from client which *default* manager is using.                      |
   +------------------------------------------------------------+----------------------------------------------------------------------------------------+
   | ``ongr:es:warmer:delete --manager shop``                   | Deletes all warmers from client which ``shop`` manager is using.                       |
   +------------------------------------------------------------+----------------------------------------------------------------------------------------+
   | ``ongr:es:warmer:delete foo baz --manager tuna``           | Deletes ``foo`` and ``baz`` named warmers from client which ``tuna`` manager is using. |
   +------------------------------------------------------------+----------------------------------------------------------------------------------------+

.. _manager: setup.html
